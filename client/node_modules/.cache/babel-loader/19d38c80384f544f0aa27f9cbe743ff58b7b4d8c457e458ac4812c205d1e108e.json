{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pamelaklapp/Documents/E-commerce/eunoia/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/pamelaklapp/Documents/E-commerce/eunoia/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/pamelaklapp/Documents/E-commerce/eunoia/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import React,{useContext}from'react';import{Helmet}from'react-helmet-async';import{Store}from'../Store';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import MessageBox from'../components/MessageBox';import ListGroup from'react-bootstrap/esm/ListGroup';import Button from'react-bootstrap/esm/Button';import Card from'react-bootstrap/esm/Card';import{Link,useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){var navigate=useNavigate();var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cartItems=state.cart.cartItems;var updateCartHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(item,quantity){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/products/\".concat(item._id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.countInStock<quantity)){_context.next=7;break;}window.alert('Sorry. Product is out of stock');return _context.abrupt(\"return\");case 7:ctxDispatch({type:'CART_ADD_ITEM',payload:_objectSpread(_objectSpread({},item),{},{quantity:quantity})});case 8:case\"end\":return _context.stop();}}},_callee);}));return function updateCartHandler(_x,_x2){return _ref.apply(this,arguments);};}();var removeItemHandler=function removeItemHandler(item){ctxDispatch({type:'CART_REMOVE_ITEM',payload:item});};var checkoutHandler=function checkoutHandler(){navigate('/signin?redirect=/shipping');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Shopping Cart\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go shopping\"})]}):/*#__PURE__*/_jsx(ListGroup,{children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid round img-thumbnail\"}),' ',/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.slug),children:item.name})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return updateCartHandler(item,item.quantity-1);},disabled:item.quantity===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),' ',/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return updateCartHandler(item,item.quantity+1);},disabled:item.quantity===item.countInStock,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})})]}),/*#__PURE__*/_jsx(Col,{md:3,children:item.price}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{variant:\"ligth\",onClick:function onClick(){return removeItemHandler(item);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item._id);})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(ListGroup,{variat:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"Subtotal (\",cartItems.reduce(function(a,c){return a+c.quantity;},0),' ',\"items) : \\u20AC\",cartItems.reduce(function(a,c){return a+c.price*c.quantity;},0)]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",varian:\"primary\",onClick:checkoutHandler,disabled:cartItems.length===0,children:\"Chechout\"})})})]})})})})]})]});}","map":{"version":3,"names":["axios","React","useContext","Helmet","Store","Row","Col","MessageBox","ListGroup","Button","Card","Link","useNavigate","CartScreen","navigate","state","ctxDispatch","dispatch","cartItems","cart","updateCartHandler","item","quantity","get","_id","data","countInStock","window","alert","type","payload","removeItemHandler","checkoutHandler","length","map","image","name","slug","price","reduce","a","c"],"sources":["/Users/pamelaklapp/Documents/E-commerce/eunoia/client/src/screens/CartScreen.jsx"],"sourcesContent":["import axios from 'axios';\nimport React, { useContext } from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { Store } from '../Store';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport MessageBox from '../components/MessageBox';\nimport ListGroup from 'react-bootstrap/esm/ListGroup';\nimport Button from 'react-bootstrap/esm/Button';\nimport Card from 'react-bootstrap/esm/Card';\nimport { Link, useNavigate } from 'react-router-dom';\n\nexport default function CartScreen() {\n  const navigate = useNavigate();\n  const { state, dispatch: ctxDispatch } = useContext(Store);\n  const {\n    cart: { cartItems },\n  } = state;\n\n  const updateCartHandler = async (item, quantity) => {\n    const { data } = await axios.get(`/api/products/${item._id}`);\n    if (data.countInStock < quantity) {\n      window.alert('Sorry. Product is out of stock');\n      return;\n    }\n    ctxDispatch({\n      type: 'CART_ADD_ITEM',\n      payload: { ...item, quantity },\n    });\n  };\n\n  const removeItemHandler = (item) => {\n    ctxDispatch({type: 'CART_REMOVE_ITEM', payload: item});\n  }\n\n  const checkoutHandler = () => {\n    navigate('/signin?redirect=/shipping');\n  }\n\n  return (\n    <div>\n      <Helmet>\n        <title>Shopping Cart</title>\n      </Helmet>\n      <h1>Shopping Cart</h1>\n      <Row>\n        <Col md={8}>\n          {cartItems.length === 0 ? (\n            <MessageBox>\n              Cart is empty. <Link to=\"/\">Go shopping</Link>\n            </MessageBox>\n          ) : (\n            <ListGroup>\n              {cartItems.map((item) => (\n                <ListGroup.Item key={item._id}>\n                  <Row className=\"align-items-center\">\n                    <Col md={4}>\n                      <img\n                        src={item.image}\n                        alt={item.name}\n                        className=\"img-fluid round img-thumbnail\"\n                      />{' '}\n                      <Link to={`/product/${item.slug}`}>{item.name}</Link>\n                    </Col>\n                    <Col md={3}>\n                      <Button\n                        variant=\"light\"\n                        onClick={() =>\n                          updateCartHandler(item, item.quantity - 1)\n                        }\n                        disabled={item.quantity === 1}\n                      >\n                        <i className=\"fas fa-minus-circle\"></i>\n                      </Button>\n                      <span>{item.quantity}</span>{' '}\n                      <Button\n                        variant=\"light\"\n                        onClick={() =>\n                          updateCartHandler(item, item.quantity + 1)\n                        }\n                        disabled={item.quantity === item.countInStock}\n                      >\n                        <i className=\"fas fa-plus-circle\"></i>\n                      </Button>\n                    </Col>\n                    <Col md={3}>{item.price}</Col>\n                    <Col md={2}>\n                      <Button variant=\"ligth\"\n                      onClick={()=> removeItemHandler(item)}>\n                        <i className=\"fas fa-trash\"></i>\n                      </Button>\n                    </Col>\n                  </Row>\n                </ListGroup.Item>\n              ))}\n            </ListGroup>\n          )}\n        </Col>\n        <Col md={4}>\n          <Card>\n            <Card.Body>\n              <ListGroup variat=\"flush\">\n                <ListGroup.Item>\n                  <h3>\n                    Subtotal ({cartItems.reduce((a, c) => a + c.quantity, 0)}{' '}\n                    items) : â‚¬\n                    {cartItems.reduce((a, c) => a + c.price * c.quantity, 0)}\n                  </h3>\n                </ListGroup.Item>\n                <ListGroup.Item>\n                  <div className=\"d-grid\">\n                    <Button\n                      type=\"button\"\n                      varian=\"primary\"\n                      onClick={checkoutHandler}\n                      disabled={cartItems.length === 0}\n                    >\n                      Chechout\n                    </Button>\n                  </div>\n                </ListGroup.Item>\n              </ListGroup>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n    </div>\n  );\n}\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}